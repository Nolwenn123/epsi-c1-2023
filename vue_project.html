<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Menus des Cantines Scolaires de Nantes</title>
    <style>
		body {
			font-family: "Arial", sans-serif;
			background-color: #f8f8f8;
			margin: 0;
			padding: 0;
			display: flex;
			justify-content: center;
			align-items: center;
			height: 100vh;
		}
	
		#demo {
			background-color: #fff;
			border-radius: 8px;
			box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
			padding: 20px;
			text-align: center;
		}
	
		h1 {
			color: #333;
			margin-bottom: 20px;
		}
	
		ul {
			list-style-type: none;
			padding: 0;
			display: flex;
			flex-wrap: wrap;
			justify-content: space-around;
		}
	
		li {
			background-color: #f0f0f0;
			border-radius: 5px;
			margin-bottom: 10px;
			padding: 10px;
			flex-basis: calc(33.333% - 20px); /* Ajuster la largeur en fonction du nombre de menus par ligne */
			box-sizing: border-box;
		}
	
		.date {
			font-weight: bold;
			color: #333;
		}
	
		strong {
			color: #009688;
		}
	</style>
	
	
</head>
<body>
    <div id="demo">
        <h1>Menus des Cantines Scolaires de Nantes</h1>

        <label>
            <input type="checkbox" v-model="isFrench" /> Langue Française
        </label>

        <ul>
            <li v-for="menu in menus">
                <span class="date">{{ menu.date }}</span><br />
                <strong>{{ menu.type_menu }}</strong><br />
                {{ menu.repas }}
            </li>
        </ul>
    </div>

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://unpkg.com/vue@3"></script>
    <script>
        const apiURL = "https://data.nantesmetropole.fr/api/explore/v2.1/catalog/datasets/244400404_menus-cantines-scolaires-nantes/records?limit=20";

        Vue.createApp({
            data() {
                return {
                    menus: [],
                    isFrench: true, // Langue par défaut est le français
                };
            },
            created: function () {
                this.fetchMenus();
            },
            watch: {
                isFrench: 'fetchMenus', // Réappeler fetchMenus lorsque isFrench change
            },
            methods: {
                fetchMenus: function () {
                    const languageParam = this.isFrench ? 'fr' : 'en';

                    axios
                        .get(apiURL + `&lang=${languageParam}`)
                        .then((response) => {
                            console.log(response.data);
                            this.menus = response.data.results;
                        })
                        .catch(function (error) {
                            console.log("Erreur lors de l'appel à l'API");
                            console.log(error);
                        });
                },
            },
        }).mount("#demo");
    </script>
</body>
</html>
